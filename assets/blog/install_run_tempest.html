---
layout: default
---

<h1 style="text-align: center">How to Install and Run Tempest</h1>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 18pt;"><strong>Prerequisites&nbsp;</strong></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Before beginning you will need an OpenStack deployment. Login to the undercloud (stack@undercloud-0) and run the following commands to install all necessary dependencies:</span></p>
<pre class="language-none line-numbers"><code>$ sudo yum -y install git &amp;&amp; sudo yum -y install wget<br />$ sudo yum group install -y 'Development Tools'<br />$ sudo yum -y install python-devel sshpass<br />$ sudo yum -y install gcc git libffi-devel libxml2-devel libxslt-devel mariadb-devel openssl-devel python-pip&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span></span></code></pre>
<p></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 18pt;"><strong>Setting Up Pip and the Virtual Environment</strong></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">This step will set up pip and a virtual environment to be used for your Tempest runs. If you don&rsquo;t already have pip installed on your undercloud, you can get it with the following command:</span></p>
<pre class="language-none line-numbers"><code>$ sudo curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py;python get-pip.py&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Now you are ready to install the virtualenv package and actually stand up a virtual environment:</span></p>
<pre class="language-none line-numbers"><code>$ pip install virtualenv<br />$ source .venv/bin/activate&zwj;&zwj;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">You will also need the junitxml package; you can get this via pip as well:</span></p>
<pre class="language-none line-numbers"><code>(.venv) $ pip install junitxml&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span></span></code></pre>
<p></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 18pt;"><strong>Installing Tempest</strong></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Now that all relevant dependencies are installed and your virtual environment is up and running, it&rsquo;s time to actually install Tempest.&nbsp;</span></p>
<pre class="language-none line-numbers"><code>(.venv) $ git clone http://git.openstack.org/openstack/tempest<br />(.venv) $ cd tempest<br />(.venv) $ pip install -U pip<br />(.venv) $ cd ..&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span></span></code></pre>
<p></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 18pt;"><strong>Installing external Tempest plugins (optional)</strong></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">You may want to include some external Tempest plugins as part of your runs. If that is the case, you can install them by emulating the following steps:</span></p>
<pre class="language-none line-numbers"><code>(.venv) $ git clone &lt;your plugin repo URL&gt;<br />(.venv) $ cd &lt;your plugin repo&gt;<br />(.venv) $ pip install --upgrade -e .<br />(.venv) $ cd ..&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">To verify your plugin was installed and discovered by Tempest, run the following command - you should see your plugin listed:</span></p>
<pre class="language-none line-numbers"><code>(.venv) $ pip list | grep -i &lt;your plugin name&gt;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Repeat the above steps for each internal plugin you wish to install.</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 18pt;"><strong>Configuring Tempest</strong></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Tempest is now installed, but we can&rsquo;t actually run it until it has been configured - this is done by editing /etc/tempest.conf. This can be done manually, but it is recommended you use python-tempestconf to do so:</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">(</span><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 12pt;"><strong>NOTE: This will not work for Newton - you must configure tempest.conf manually for Newton or below)</strong></span></p>
<pre class="language-none line-numbers"><code>(.venv) $ git clone https://git.openstack.org/openstack/python-tempestconf<br />(.venv) $ cd python-tempestconf<br />(.venv) $ pip install .<br />(.venv) $ . ~/overcloudrc&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">The actually configuration command can be done many different ways (</span><a href="https://docs.openstack.org/python-tempestconf/latest/" style="text-decoration: none;"><span style="font-size: 12pt; color: #1155cc; background-color: transparent; font-weight: 400; text-decoration: underline;">see the python-tempestconf documentation for more info</span></a><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">); this is the simplest implementation and should work for basic deployments:</span></p>
<pre class="language-none line-numbers"><code>(overcloud) (.venv) $ python config_tempest/main.py --create --debug identity.uri $OS_AUTH_URL identity.admin_password $OS_PASSWORD identity.region regionOne&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Lastly, move the generated tempest.conf file to /etc/tempest.conf to override the empty one generated by your Tempest installation:</span></p>
<pre class="language-none line-numbers"><code>(overcloud) (.venv) $ mv etc/tempest.conf /etc/tempest&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span></span></code></pre>
<p></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="background-color: transparent; color: #000000; text-decoration: none; font-size: 18pt;"><strong>Running Tempest</strong></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Finally, you are ready to run Tempest! Return to the tempest directory and run Tempest with stestr (</span><a href="https://stestr.readthedocs.io/en/latest/" style="text-decoration: none;"><span style="font-size: 12pt; color: #1155cc; background-color: transparent; font-weight: 400; text-decoration: underline;">see the stestr documentation for more info</span></a><span style="font-size: 12pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">):</span></p>
<pre class="language-none line-numbers"><code>(overcloud) (.venv) $ cd tempest<br />(overcloud) (.venv) $ stestr run&zwj;&zwj;&zwj;&zwj;<span class="line-numbers-rows"><span>&zwj;</span><span>&zwj;</span></span></code></pre>
<p style="margin-top: 0pt; margin-bottom: 0pt; text-align: center;"><span style="font-size: 10pt; color: #000000; background-color: transparent; font-weight: 400; text-decoration: none;">Special thanks to Eran Kuris and Mike Abrams who made writing this article possible</span></p>
